<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Playwright Automated Testing with JavaScript (Login Example)</title>
  <style>
    :root{
      --bg:#0b0f17;--panel:#121826;--ink:#e6edf3;--muted:#9fb0c3;
      --accent:#7cc4ff;--border:#223047;--code:#0d1117;--green:#70e000;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .wrap{max-width: 980px; margin: 0 auto; padding: 32px 20px;}
    header{margin-bottom:24px;}
    h1{font-size: clamp(28px, 3vw, 40px); line-height:1.2; margin:0 0 10px}
    h2{margin-top:40px; font-size: 22px; border-top:1px solid var(--border); padding-top:16px}
    h3{margin-top:28px; font-size: 18px; color: var(--accent);}
    p.lead{color:var(--muted); font-size:18px}
    code, pre{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    pre{background: var(--code); padding:16px; border:1px solid var(--border); border-radius:12px; overflow:auto}
    code{background: color-mix(in oklab, var(--code), #fff 2%); padding:2px 6px; border-radius:6px; border:1px solid var(--border)}
    .panel{background: var(--panel); border:1px solid var(--border); border-radius:16px; padding:20px}
    .grid{display:grid; gap:16px}
    .grid.cols-2{grid-template-columns: repeat(auto-fit, minmax(280px, 1fr))}
    ul{padding-left:22px}
    .pill{display:inline-block; padding:6px 10px; border:1px solid var(--border); border-radius:999px; color:var(--muted); font-size:13px; margin-right:8px}
    .callout{border-left: 4px solid var(--accent); padding:12px 14px; background: #0e1524; border-radius:8px}
    a{color: var(--accent); text-decoration: none;}
    a:hover{text-decoration: underline;}
    footer{margin-top:48px; color:var(--muted); font-size:14px}
    .kbd{border:1px solid var(--border); padding:2px 6px; border-radius:6px; background:#0d1220}
    .ok{color:var(--green)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <span class="pill">Playwright • JavaScript • UI Testing</span>
      <h1>Playwright Automated Testing with JavaScript: A Practical Guide (Login Example)</h1>
      <p class="lead">Set up Playwright, structure tests with Page Objects, and implement a realistic <strong>Login</strong> flow—then wire it all to CI.</p>
    </header>

    <section class="panel">
      <h2>1) Quick Start</h2>
      <pre><code># 1) Initialize project
mkdir pw-login-demo &amp;&amp; cd pw-login-demo
npm init -y

# 2) Install Playwright (and browsers)
npm i -D @playwright/test
npx playwright install

# (optional) Verify install
npx playwright --version</code></pre>

      <h3>Suggested project layout</h3>
      <pre><code>pw-login-demo/
├─ playwright.config.js
├─ tests/
│  ├─ fixtures/
│  │  └─ test-fixtures.js
│  ├─ pages/
│  │  └─ LoginPage.js
│  └─ login.spec.js
└─ package.json</code></pre>
    </section>

    <section class="panel">
      <h2>2) Base Configuration</h2>
      <pre><code class="language-js">// playwright.config.js
// @ts-check
const { defineConfig, devices } = require('@playwright/test');

module.exports = defineConfig({
  testDir: './tests',
  timeout: 30 * 1000,
  expect: { timeout: 5000 },
  fullyParallel: true,
  reporter: [['list'], ['html', { outputFolder: 'pw-report', open: 'never' }]],
  use: {
    baseURL: process.env.BASE_URL || 'https://example-app.test',
    headless: true,
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
    trace: 'retain-on-failure',
  },
  projects: [
    { name: 'Chromium', use: { ...devices['Desktop Chrome'] } },
    // { name: 'Firefox',  use: { ...devices['Desktop Firefox'] } },
    // { name: 'WebKit',   use: { ...devices['Desktop Safari'] } },
  ],
});</code></pre>
      <div class="callout"><strong>Tip:</strong> Store secrets like <code>TEST_USER_EMAIL</code> and <code>TEST_USER_PASSWORD</code> in your CI secret manager.</div>
    </section>

    <section class="panel">
      <h2>3) Page Object: Login</h2>
      <pre><code class="language-js">// tests/pages/LoginPage.js
class LoginPage {
  /** @param {import('@playwright/test').Page} page */
  constructor(page) {
    this.page = page;
    this.emailInput = page.getByLabel(/email/i).or(page.getByPlaceholder(/email/i));
    this.passwordInput = page.getByLabel(/password/i).or(page.getByPlaceholder(/password/i));
    this.submitButton = page.getByRole('button', { name: /log in|sign in/i });
    this.errorBanner = page.getByRole('alert').or(page.getByText(/invalid|incorrect/i));
    this.userMenu = page.getByRole('button', { name: /account|profile|user/i });
  }
  async goto(){ await this.page.goto('/login'); }
  async login(email, password){
    await this.emailInput.fill(email);
    await this.passwordInput.fill(password);
    await this.submitButton.click();
  }
}
module.exports = { LoginPage };</code></pre>
    </section>

    <section class="panel">
      <h2>4) Lightweight Fixture</h2>
      <pre><code class="language-js">// tests/fixtures/test-fixtures.js
const { test: base } = require('@playwright/test');
const { LoginPage } = require('../pages/LoginPage');

const test = base.extend({
  loginPage: async ({ page }, use) => {
    const loginPage = new LoginPage(page);
    await use(loginPage);
  },
});

module.exports = { test, expect: base.expect };</code></pre>
    </section>

    <section class="panel">
      <h2>5) Login Specs</h2>
      <pre><code class="language-js">// tests/login.spec.js
const { test, expect } = require('./fixtures/test-fixtures');

const VALID_EMAIL  = process.env.TEST_USER_EMAIL || 'user@example.com';
const VALID_PASS   = process.env.TEST_USER_PASSWORD || 'SuperSecret123!';
const INVALID_PASS = 'wrong-password';

test.describe('Login', () => {
  test.beforeEach(async ({ page, loginPage }) => {
    await loginPage.goto();
    await expect(loginPage.submitButton).toBeVisible();
  });

  test('shows an error with invalid credentials', async ({ loginPage }) => {
    await loginPage.login(VALID_EMAIL, INVALID_PASS);
    await expect(loginPage.errorBanner).toBeVisible();
  });

  test('logs in successfully with valid credentials', async ({ page, loginPage }) => {
    await loginPage.login(VALID_EMAIL, VALID_PASS);
    await page.waitForURL(/dashboard|home/, { timeout: 5000 });
    await expect(loginPage.userMenu).toBeVisible();
    await expect(page.getByText(/welcome|hello/i)).toBeVisible();
  });
});</code></pre>

      <h3>Run it</h3>
      <pre><code># Headless run
npx playwright test

# Debug with UI
npx playwright test tests/login.spec.js --headed --ui</code></pre>
    </section>

    <section class="panel">
      <h2>6) CI: GitHub Actions</h2>
      <p>This workflow runs Playwright tests on every push/PR, captures HTML reports and traces, and uses CI secrets for credentials.</p>
      <pre><code class="language-yaml"># .github/workflows/playwright-ci.yml
name: Playwright CI

on:
  push:
    branches: [ "main" ]
  pull_request:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm

      - name: Install deps
        run: npm ci

      - name: Install Playwright browsers
        run: npx playwright install --with-deps

      - name: Run tests
        run: npx playwright test
        env:
          BASE_URL: ${{ secrets.BASE_URL }}
          TEST_USER_EMAIL: ${{ secrets.TEST_USER_EMAIL }}
          TEST_USER_PASSWORD: ${{ secrets.TEST_USER_PASSWORD }}

      - name: Upload HTML report
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: playwright-report
          path: pw-report
          if-no-files-found: ignore

      - name: Upload traces
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: traces
          path: .playwright/**/trace.zip
          if-no-files-found: ignore</code></pre>

      <div class="callout">
        <strong>Set CI Secrets:</strong> In your repo, go to <span class="kbd">Settings → Secrets and variables → Actions</span> and add <code>BASE_URL</code>, <code>TEST_USER_EMAIL</code>, <code>TEST_USER_PASSWORD</code>.
      </div>

      <h3>Optional: Publish this blog with GitHub Pages</h3>
      <pre><code class="language-yaml"># .github/workflows/pages-deploy.yml
name: Deploy Blog to Pages

on:
  push:
    branches: [ "main" ]
    paths:
      - "blog-playwright-login.html"
  workflow_dispatch:

jobs:
  deploy:
    permissions:
      contents: read
      pages: write
      id-token: write
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v5
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: .
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4</code></pre>
      <p>Then enable Pages in <span class="kbd">Settings → Pages</span> and select the “GitHub Actions” source.</p>
    </section>

    <section class="panel">
      <h2>7) Extras</h2>
      <ul>
        <li><strong>Storage state:</strong> log in once in a global setup and reuse a saved session in tests.</li>
        <li><strong>Network stubs:</strong> use <code>page.route()</code> to simulate API failures.</li>
        <li><strong>Artifacts:</strong> open the HTML report with <code>npx playwright show-report</code> or traces with <code>npx playwright show-trace</code>.</li>
      </ul>
      <p class="ok">✅ With the workflow above, every PR gets reliable, cross-browser UI checks.</p>
    </section>

    <footer>
      <p>© 2025 Playwright Login Demo • Built with ❤️ and caffeine.</p>
    </footer>
  </div>
</body>
</html>
